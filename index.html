<!DOCTYPE html>
<html>
  <head>
    <title>1 Meter Test - 17cm Marker</title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    
    <style>
      body { margin: 0; overflow: hidden; font-family: sans-serif; }
      
      /* Start Screen (Required for reliable camera permission) */
      #start-screen {
        position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        background: rgba(0,0,0,0.9); z-index: 999;
        display: flex; flex-direction: column; align-items: center; justify-content: center;
        color: white;
      }
      #start-btn {
        padding: 15px 40px; font-size: 20px; background: #28a745;
        color: white; border: none; border-radius: 50px; cursor: pointer; margin-top: 20px;
      }
      #status {
        position: fixed; top: 10px; width: 100%; text-align: center; color: yellow;
        font-weight: bold; pointer-events: none; text-shadow: 1px 1px 2px black;
      }
    </style>
  </head>

  <body>

    <div id="start-screen">
      <h2>Calibration Test</h2>
      <p>Marker Size: <b>17 cm</b></p>
      <p>Target Height: <b>100 cm</b></p>
      <button id="start-btn" onclick="startAR()">Start Camera</button>
    </div>

    <div id="status" style="display:none;">Scan 17cm Hiro Marker</div>

    <a-scene 
      embedded 
      vr-mode-ui="enabled: false"
      renderer="logarithmicDepthBuffer: true;"
      arjs="sourceType: webcam; debugUIEnabled: false; detectionMode: mono_and_matrix; matrixCodeType: 3x3;">

      <a-marker preset="hiro" id="marker" size="0.17" smooth="true" smoothCount="10" smoothTolerance="0.01" smoothThreshold="5">
        
        <a-cylinder 
          position="0 0.5 0" 
          radius="0.005" 
          height="1" 
          color="white" 
          opacity="0.5">
        </a-cylinder>

        <a-entity position="0 1.0 0">
            <a-torus color="#00ff00" radius="0.3" radius-tubular="0.01" rotation="90 0 0"></a-torus>
            
            <a-text 
              value="100 cm" 
              color="#00ff00" 
              align="center" 
              position="0 0.4 0" 
              scale="2 2 2"
              rotation="0 0 0">
            </a-text>
        </a-entity>

      </a-marker>

      <a-entity camera></a-entity>
    </a-scene>

    <script>
      function startAR() {
        document.getElementById('start-screen').style.display = 'none';
        document.getElementById('status').style.display = 'block';
      }
    </script>
  </body>
</html>